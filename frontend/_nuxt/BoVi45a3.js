import{c,o as r,F as k,r as $,a as e,t as v,n as b,_ as L,g as p,j as z,k as B,l as M,m as N,p as E,b as w,q as y,s as f}from"./DYX1uUzg.js";import{_ as I}from"./zJzAaQbd.js";const G={class:"grid grid-cols-1 gap-6"},q={class:"w-full h-64 overflow-hidden relative"},K={class:"absolute top-0 left-0 h-full w-16 bg-black opacity-0 group-hover:opacity-80 group-hover:translate-x-0 -translate-x-full transition-all duration-300 z-10 flex items-center justify-center"},J={class:"absolute text-white text-xs font-bold text-center whitespace-pre-line transform rotate-[270deg] w-96 block left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},V=["src","alt","onClick"],F={__name:"MobileGallery",props:{images:{type:Array,required:!0}},emits:["open-lightbox"],setup(d){return(o,a)=>(r(),c("div",G,[(r(!0),c(k,null,$(d.images,(t,n)=>(r(),c("div",{key:t.id,class:"relative overflow-hidden group"},[e("div",q,[e("div",K,[e("span",J,v(t.caption||"عنوان عکس"),1)]),e("img",{src:t.url,alt:t.caption||"Album photo",class:"w-full h-64 object-cover scale-110 transition-transform duration-300 group-hover:translate-x-4 cursor-pointer",loading:"lazy",onClick:u=>o.$emit("open-lightbox",n)},null,8,V)])]))),128))]))}},O={class:"grid grid-cols-12 gap-6"},S={class:"w-full h-96 overflow-hidden relative"},D={class:"absolute top-0 left-0 h-full w-16 bg-black opacity-0 group-hover:opacity-80 group-hover:translate-x-0 -translate-x-full transition-all duration-300 z-10 flex items-center justify-center"},P={class:"absolute text-white text-xs font-bold text-center whitespace-pre-line transform rotate-[270deg] w-96 block left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},T=["src","alt","onClick"],U={__name:"Gallery",props:{images:{type:Array,required:!0}},emits:["open-lightbox"],setup(d){function o(a){const t=a%3,n=Math.floor(a/3)%3;if(n===0){if(t===0)return"col-span-3";if(t===1)return"col-span-6";if(t===2)return"col-span-3"}if(n===1){if(t===0)return"col-span-6";if(t===1||t===2)return"col-span-3"}if(n===2){if(t===0||t===1)return"col-span-3";if(t===2)return"col-span-6"}return"col-span-4"}return(a,t)=>(r(),c("div",O,[(r(!0),c(k,null,$(d.images,(n,u)=>(r(),c("div",{key:n.id,class:b([o(u),"relative overflow-hidden group"])},[e("div",S,[e("div",D,[e("span",P,v(n.caption||"عنوان عکس"),1)]),e("img",{src:n.url,alt:n.caption||"Album photo",class:"w-full h-96 object-cover scale-110 transition-transform duration-300 group-hover:translate-x-4 cursor-pointer",loading:"lazy",onClick:l=>a.$emit("open-lightbox",u)},null,8,T)])],2))),128))]))}},H={class:"flex flex-col items-center justify-center w-full min-h-screen flex-grow"},Q={__name:"JabamaLoading",setup(d){return(o,a)=>(r(),c("div",H,a[0]||(a[0]=[e("div",{class:"relative flex items-center justify-center"},[e("div",{class:"absolute w-64 h-64 rounded-full bg-amber-400 opacity-30 animate-pulse-glow"}),e("img",{src:I,alt:"Jabama Logo",class:"w-56 h-56 animate-heart-beat drop-shadow-lg relative z-10"})],-1),e("div",{class:"mt-10 text-amber-600 text-2xl font-semibold tracking-wide animate-fade-in"},"در حال بارگذاری...",-1)])))}},R=L(Q,[["__scopeId","data-v-53d3d39b"]]),W={class:"container mx-auto px-3 py-6"},X={key:1,class:"text-center py-12 text-red-500"},Y={key:2},Z={class:"block sm:hidden"},ee={class:"hidden sm:block"},te=["onKeydown"],oe=["disabled"],le={class:"flex flex-col items-center relative"},se=["src","alt"],ae={class:"absolute bottom-0 left-0 w-full bg-black bg-opacity-70 py-3 px-4 text-white text-lg font-bold text-center rounded-b-lg",style:{"backdrop-filter":"blur(2px)"}},ne=["disabled"],ce={__name:"album",setup(d){const o=p([]),a=p(!0),t=p(null),n=z(),u=p(!1),l=p(0);B(async()=>{try{a.value=!0;const i=await n.$api.get("/api/v1/albums");if(i&&i.data&&Array.isArray(i.data))o.value=i.data;else throw new Error("Invalid response format")}catch(i){t.value=i.message||"خطا در بارگذاری آلبوم‌ها"}finally{a.value=!1}});function g(i){i.key==="Escape"&&h()}function m(i){l.value=i,u.value=!0,setTimeout(()=>{const s=document.querySelector(".fixed.inset-0");s&&s.focus()},0),window.addEventListener("keydown",g)}function h(){u.value=!1,window.removeEventListener("keydown",g)}function x(){l.value>0&&l.value--}function _(){console.log("Next button clicked"),console.log("Current index:",l.value),console.log("Images length:",o.value.length),l.value<o.value.length-1?(l.value++,console.log("New index:",l.value)):console.log("Already at the last image")}return M(()=>{window.removeEventListener("keydown",g)}),(i,s)=>{const C=F,j=U;return r(),c("div",W,[a.value?(r(),N(R,{key:0})):t.value?(r(),c("div",X,v(t.value),1)):(r(),c("div",Y,[e("div",Z,[w(C,{images:o.value,onOpenLightbox:m},null,8,["images"])]),e("div",ee,[w(j,{images:o.value,onOpenLightbox:m},null,8,["images"])])])),u.value?(r(),c("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[100]",onClick:h,onKeydown:[y(f(x,["prevent"]),["left"]),y(f(_,["prevent"]),["right"])],tabindex:"0"},[e("button",{class:b(["absolute left-8 top-1/2 -translate-y-1/2 text-white bg-black/50 rounded-full w-12 h-12 flex items-center justify-center p-0 z-50 hover:bg-black/80 transition",{"opacity-50 cursor-not-allowed":l.value===0}]),disabled:l.value===0,onClick:s[0]||(s[0]=f(A=>x(),["stop"])),"aria-label":"Previous image"},s[3]||(s[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),10,oe),e("div",le,[e("img",{src:o.value[l.value].url,alt:o.value[l.value].caption||"Album photo",class:"max-h-[80vh] max-w-[90vw] object-contain rounded-lg shadow-2xl",loading:"lazy",onClick:s[1]||(s[1]=f(()=>{},["stop"]))},null,8,se),e("div",ae,v(o.value[l.value].caption||"عنوان عکس"),1)]),e("button",{class:b(["absolute right-8 top-1/2 -translate-y-1/2 text-white bg-black/50 rounded-full w-12 h-12 flex items-center justify-center p-0 z-50 hover:bg-black/80 transition",{"opacity-50 cursor-not-allowed":l.value===o.value.length-1}]),disabled:l.value===o.value.length-1,onClick:s[2]||(s[2]=f(A=>_(),["stop"])),"aria-label":"Next image"},s[4]||(s[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),10,ne),e("button",{class:"absolute top-8 right-8 text-white text-3xl font-bold",onClick:h,"aria-label":"Close lightbox"},"×")],40,te)):E("",!0)])}}};export{ce as default};

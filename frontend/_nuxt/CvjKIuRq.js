import{c as i,o as r,F as k,r as $,a as e,t as f,n as b,g as d,j as L,k as z,l as B,m as M,p as N,b as y,q as _,s as p}from"./DSeZRhxd.js";import{J as E}from"./BWY_9Dr7.js";import"./B7IfD8-4.js";const G={class:"grid grid-cols-1 gap-6"},I={class:"w-full h-64 overflow-hidden relative"},q={class:"absolute top-0 left-0 h-full w-16 bg-black opacity-0 group-hover:opacity-80 group-hover:translate-x-0 -translate-x-full transition-all duration-300 z-10 flex items-center justify-center"},K={class:"absolute text-white text-xs font-bold text-center whitespace-pre-line transform rotate-[270deg] w-96 block left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},V=["src","alt","onClick"],F={__name:"MobileGallery",props:{images:{type:Array,required:!0}},emits:["open-lightbox"],setup(v){return(l,c)=>(r(),i("div",G,[(r(!0),i(k,null,$(v.images,(t,n)=>(r(),i("div",{key:t.id,class:"relative overflow-hidden group"},[e("div",I,[e("div",q,[e("span",K,f(t.caption||"عنوان عکس"),1)]),e("img",{src:t.url,alt:t.caption||"Album photo",class:"w-full h-64 object-cover scale-110 transition-transform duration-300 group-hover:translate-x-4 cursor-pointer",loading:"lazy",onClick:u=>l.$emit("open-lightbox",n)},null,8,V)])]))),128))]))}},J={class:"grid grid-cols-12 gap-6"},O={class:"w-full h-96 overflow-hidden relative"},S={class:"absolute top-0 left-0 h-full w-16 bg-black opacity-0 group-hover:opacity-80 group-hover:translate-x-0 -translate-x-full transition-all duration-300 z-10 flex items-center justify-center"},D={class:"absolute text-white text-xs font-bold text-center whitespace-pre-line transform rotate-[270deg] w-96 block left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},P=["src","alt","onClick"],T={__name:"Gallery",props:{images:{type:Array,required:!0}},emits:["open-lightbox"],setup(v){function l(c){const t=c%3,n=Math.floor(c/3)%3;if(n===0){if(t===0)return"col-span-3";if(t===1)return"col-span-6";if(t===2)return"col-span-3"}if(n===1){if(t===0)return"col-span-6";if(t===1||t===2)return"col-span-3"}if(n===2){if(t===0||t===1)return"col-span-3";if(t===2)return"col-span-6"}return"col-span-4"}return(c,t)=>(r(),i("div",J,[(r(!0),i(k,null,$(v.images,(n,u)=>(r(),i("div",{key:n.id,class:b([l(u),"relative overflow-hidden group"])},[e("div",O,[e("div",S,[e("span",D,f(n.caption||"عنوان عکس"),1)]),e("img",{src:n.url,alt:n.caption||"Album photo",class:"w-full h-96 object-cover scale-110 transition-transform duration-300 group-hover:translate-x-4 cursor-pointer",loading:"lazy",onClick:o=>c.$emit("open-lightbox",u)},null,8,P)])],2))),128))]))}},U={class:"container mx-auto px-3 py-6"},H={key:1,class:"text-center py-12 text-red-500"},Q={key:2},R={class:"block sm:hidden"},W={class:"hidden sm:block"},X=["onKeydown"],Y=["disabled"],Z={class:"flex flex-col items-center relative"},ee=["src","alt"],te={class:"absolute bottom-0 left-0 w-full bg-black bg-opacity-70 py-3 px-4 text-white text-lg font-bold text-center rounded-b-lg",style:{"backdrop-filter":"blur(2px)"}},oe=["disabled"],ae={__name:"album",setup(v){const l=d([]),c=d(!0),t=d(null),n=L(),u=d(!1),o=d(0);z(async()=>{try{c.value=!0;const a=await n.$api.get("/api/v1/albums");if(a&&a.data&&Array.isArray(a.data))l.value=a.data;else throw new Error("Invalid response format")}catch(a){t.value=a.message||"خطا در بارگذاری آلبوم‌ها"}finally{c.value=!1}});function h(a){a.key==="Escape"&&g()}function m(a){o.value=a,u.value=!0,setTimeout(()=>{const s=document.querySelector(".fixed.inset-0");s&&s.focus()},0),window.addEventListener("keydown",h)}function g(){u.value=!1,window.removeEventListener("keydown",h)}function x(){o.value>0&&o.value--}function w(){console.log("Next button clicked"),console.log("Current index:",o.value),console.log("Images length:",l.value.length),o.value<l.value.length-1?(o.value++,console.log("New index:",o.value)):console.log("Already at the last image")}return B(()=>{window.removeEventListener("keydown",h)}),(a,s)=>{const C=F,A=T;return r(),i("div",U,[c.value?(r(),M(E,{key:0})):t.value?(r(),i("div",H,f(t.value),1)):(r(),i("div",Q,[e("div",R,[y(C,{images:l.value,onOpenLightbox:m},null,8,["images"])]),e("div",W,[y(A,{images:l.value,onOpenLightbox:m},null,8,["images"])])])),u.value?(r(),i("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[100]",onClick:g,onKeydown:[_(p(x,["prevent"]),["left"]),_(p(w,["prevent"]),["right"])],tabindex:"0"},[e("button",{class:b(["absolute left-8 top-1/2 -translate-y-1/2 text-white bg-black/50 rounded-full w-12 h-12 flex items-center justify-center p-0 z-50 hover:bg-black/80 transition",{"opacity-50 cursor-not-allowed":o.value===0}]),disabled:o.value===0,onClick:s[0]||(s[0]=p(j=>x(),["stop"])),"aria-label":"Previous image"},s[3]||(s[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),10,Y),e("div",Z,[e("img",{src:l.value[o.value].url,alt:l.value[o.value].caption||"Album photo",class:"max-h-[80vh] max-w-[90vw] object-contain rounded-lg shadow-2xl",loading:"lazy",onClick:s[1]||(s[1]=p(()=>{},["stop"]))},null,8,ee),e("div",te,f(l.value[o.value].caption||"عنوان عکس"),1)]),e("button",{class:b(["absolute right-8 top-1/2 -translate-y-1/2 text-white bg-black/50 rounded-full w-12 h-12 flex items-center justify-center p-0 z-50 hover:bg-black/80 transition",{"opacity-50 cursor-not-allowed":o.value===l.value.length-1}]),disabled:o.value===l.value.length-1,onClick:s[2]||(s[2]=p(j=>w(),["stop"])),"aria-label":"Next image"},s[4]||(s[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),10,oe),e("button",{class:"absolute top-8 right-8 text-white text-3xl font-bold",onClick:g,"aria-label":"Close lightbox"},"×")],40,X)):N("",!0)])}}};export{ae as default};

import{c as i,o as n,F as A,r as L,a as o,t as b,n as m,e as d,f as N,g as I,h as K,i as $,j as q,b as C,k as j,l as p,m as V}from"./CejuIrEN.js";import{J as D,_ as F}from"./C4u4okJB.js";import"./BsgyqE5M.js";import"./DlAUqK2U.js";const H={class:"grid grid-cols-1 gap-6"},J={class:"w-full h-64 overflow-hidden relative"},O={class:"absolute top-0 left-0 h-full w-16 bg-black opacity-0 group-hover:opacity-80 group-hover:translate-x-0 -translate-x-full transition-all duration-300 z-10 flex items-center justify-center"},R={class:"absolute text-white text-xs font-bold text-center whitespace-pre-line transform rotate-[270deg] w-96 block left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},S=["src","alt","onClick"],T={__name:"MobileGallery",props:{images:{type:Array,required:!0}},emits:["open-lightbox"],setup(v){return(s,r)=>(n(),i("div",H,[(n(!0),i(A,null,L(v.images,(t,l)=>(n(),i("div",{key:t.id,class:"relative overflow-hidden group"},[o("div",J,[o("div",O,[o("span",R,b(t.caption||"عنوان عکس"),1)]),o("img",{src:t.url,alt:t.caption||"Album photo",class:"w-full h-64 object-cover scale-110 transition-transform duration-300 group-hover:translate-x-4 cursor-pointer",loading:"lazy",onClick:c=>s.$emit("open-lightbox",l)},null,8,S)])]))),128))]))}},P={class:"grid grid-cols-12 gap-6"},U={class:"w-full h-96 overflow-hidden relative"},Q={class:"absolute top-0 left-0 h-full w-16 bg-black opacity-0 group-hover:opacity-80 group-hover:translate-x-0 -translate-x-full transition-all duration-300 z-10 flex items-center justify-center"},W={class:"absolute text-white text-xs font-bold text-center whitespace-pre-line transform rotate-[270deg] w-96 block left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},X=["src","alt","onClick"],Y={__name:"Gallery",props:{images:{type:Array,required:!0}},emits:["open-lightbox"],setup(v){function s(r){const t=r%3,l=Math.floor(r/3)%3;if(l===0){if(t===0)return"col-span-3";if(t===1)return"col-span-6";if(t===2)return"col-span-3"}if(l===1){if(t===0)return"col-span-6";if(t===1||t===2)return"col-span-3"}if(l===2){if(t===0||t===1)return"col-span-3";if(t===2)return"col-span-6"}return"col-span-4"}return(r,t)=>(n(),i("div",P,[(n(!0),i(A,null,L(v.images,(l,c)=>(n(),i("div",{key:l.id,class:m([s(c),"relative overflow-hidden group"])},[o("div",U,[o("div",Q,[o("span",W,b(l.caption||"عنوان عکس"),1)]),o("img",{src:l.url,alt:l.caption||"Album photo",class:"w-full h-96 object-cover scale-110 transition-transform duration-300 group-hover:translate-x-4 cursor-pointer",loading:"lazy",onClick:w=>r.$emit("open-lightbox",c)},null,8,X)])],2))),128))]))}},Z={class:"container mx-auto px-3 py-6"},ee={key:2},te={class:"block sm:hidden"},oe={class:"hidden sm:block"},le=["onKeydown"],se=["disabled"],ae={class:"flex flex-col items-center relative"},ne=["src","alt"],re={class:"absolute bottom-0 left-0 w-full bg-black bg-opacity-70 py-3 px-4 text-white text-lg font-bold text-center rounded-b-lg",style:{"backdrop-filter":"blur(2px)"}},ie=["disabled"],ve={__name:"album",setup(v){const s=d([]),r=d(!0),t=d(null),l=d(null),c=d(null),w=N(),f=d(!1),a=d(0),x=async()=>{var u;try{r.value=!0,t.value=null,l.value=null,c.value=null;const e=await w.$api.get("/api/v1/albums");if(e&&e.data&&Array.isArray(e.data))s.value=e.data;else throw new Error("Invalid response format")}catch(e){t.value="خطا در اتصال به سرور",l.value=((u=e.response)==null?void 0:u.status)||500,c.value=e.message}finally{r.value=!1}};I(x);const z=()=>{x()},M=()=>{V("/")};function h(u){u.key==="Escape"&&g()}function _(u){a.value=u,f.value=!0,setTimeout(()=>{const e=document.querySelector(".fixed.inset-0");e&&e.focus()},0),window.addEventListener("keydown",h)}function g(){f.value=!1,window.removeEventListener("keydown",h)}function y(){a.value>0&&a.value--}function k(){a.value<s.value.length-1&&a.value++}return K(()=>{window.removeEventListener("keydown",h)}),(u,e)=>{const B=T,G=Y;return n(),i("div",Z,[r.value?(n(),$(D,{key:0})):t.value?(n(),$(F,{key:1,title:"خطا در اتصال به سرور",message:t.value,"show-details":!1,"error-code":l.value,"error-message":c.value,onRetry:z,onGoHome:M},null,8,["message","error-code","error-message"])):(n(),i("div",ee,[o("div",te,[C(B,{images:s.value,onOpenLightbox:_},null,8,["images"])]),o("div",oe,[C(G,{images:s.value,onOpenLightbox:_},null,8,["images"])])])),f.value?(n(),i("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[100]",onClick:g,onKeydown:[j(p(y,["prevent"]),["left"]),j(p(k,["prevent"]),["right"])],tabindex:"0"},[o("button",{class:m(["absolute left-8 top-1/2 -translate-y-1/2 text-white bg-black/50 rounded-full w-12 h-12 flex items-center justify-center p-0 z-50 hover:bg-black/80 transition",{"opacity-50 cursor-not-allowed":a.value===0}]),disabled:a.value===0,onClick:e[0]||(e[0]=p(E=>y(),["stop"])),"aria-label":"Previous image"},e[3]||(e[3]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),10,se),o("div",ae,[o("img",{src:s.value[a.value].url,alt:s.value[a.value].caption||"Album photo",class:"max-h-[80vh] max-w-[90vw] object-contain rounded-lg shadow-2xl",loading:"lazy",onClick:e[1]||(e[1]=p(()=>{},["stop"]))},null,8,ne),o("div",re,b(s.value[a.value].caption||"عنوان عکس"),1)]),o("button",{class:m(["absolute right-8 top-1/2 -translate-y-1/2 text-white bg-black/50 rounded-full w-12 h-12 flex items-center justify-center p-0 z-50 hover:bg-black/80 transition",{"opacity-50 cursor-not-allowed":a.value===s.value.length-1}]),disabled:a.value===s.value.length-1,onClick:e[2]||(e[2]=p(E=>k(),["stop"])),"aria-label":"Next image"},e[4]||(e[4]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),10,ie),o("button",{class:"absolute top-8 right-8 text-white text-3xl font-bold",onClick:g,"aria-label":"Close lightbox"},"×")],40,le)):q("",!0)])}}};export{ve as default};

import{D as b,r as d,j as k,q as j,c as n,o as l,a as e,t as r,z as C,d as f}from"./Bi9Xi-du.js";const z={class:"container mx-auto p-1"},B={key:0,class:"flex justify-center items-center py-8"},D={key:1,class:"text-center text-red-500"},M={key:2,class:"space-y-6"},R={class:"bg-white shadow-md rounded-lg overflow-hidden"},$={class:"p-6"},E={class:"flex items-center justify-between"},I={class:"flex items-center space-x-4 space-x"},N={class:"text-lg font-semibold text-gray-900"},S={class:"text-sm text-gray-500"},T={class:"text-sm text-gray-700 mt-1"},U={class:"flex items-center space-x-4"},V={class:"grid grid-cols-4 gap-6"},F={class:"col-span-3"},P={class:"bg-white shadow-md rounded-lg overflow-hidden h-full"},q={class:"p-6"},A={class:"h-[calc(100vh-400px)] flex items-center justify-center bg-gray-50 rounded-lg"},G={key:0,class:"flex flex-col items-center"},H=["src"],J={class:"space-y-6"},K={class:"bg-white shadow-md rounded-lg overflow-hidden"},L={class:"p-6"},O={class:"flex items-center space-x-4 space-x"},Q=["src","alt"],W={class:"text-sm font-medium text-gray-900"},X={class:"text-xs text-gray-500"},Y={class:"bg-white shadow-md rounded-lg overflow-hidden"},Z={class:"p-6"},ee={class:"space-y-4"},te={class:"text-sm text-gray-900"},se={class:"text-sm text-gray-900"},ne={__name:"[id]",setup(oe){const g=b(),o=d(null),u=d(!0),i=d(null),{$api:c}=k(),p=d(null),m=d(!1),x=async()=>{try{u.value=!0,i.value=null;const s=await c.get(`/api/v1/admin/resumes/${g.params.id}`);o.value=s.data}catch(s){i.value=s.message||"خطا در دریافت اطلاعات رزومه"}finally{u.value=!1}},h=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800";case"reviewed":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_=s=>{switch(s){case"pending":return"در انتظار بررسی";case"reviewed":return"بررسی شده";case"accepted":return"تایید شده";case"rejected":return"رد شده";default:return s}},v=s=>{const t=new Date(s);return new Intl.DateTimeFormat("fa-IR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},y=async()=>{try{m.value=!0;const s=await c.get(`/api/v1/upload/presigned/${o.value.file}`);p.value=s.data.url}catch(s){console.error("Error loading PDF:",s),alert("خطا در مشاهده فایل")}finally{m.value=!1}},w=async()=>{try{const t=(await c.get(`/api/v1/upload/presigned/${o.value.file}`)).data.url,a=document.createElement("a");a.href=t,a.download=`resume-${o.value.introduced_name}.pdf`,document.body.appendChild(a),a.click(),document.body.removeChild(a)}catch(s){console.error("Error downloading file:",s),alert("خطا در دانلود فایل")}};return j(()=>{x()}),(s,t)=>(l(),n("div",z,[t[9]||(t[9]=e("div",{class:"mb-6"},[e("h1",{class:"text-xl font-bold text-purple-700"},"جزئیات رزومه")],-1)),u.value?(l(),n("div",B,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"},null,-1)]))):i.value?(l(),n("div",D,r(i.value),1)):(l(),n("div",M,[e("div",R,[e("div",$,[e("div",E,[e("div",I,[t[1]||(t[1]=e("div",{class:"w-16 h-16 rounded-full bg-purple-100 flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",null,[e("h2",N,r(o.value.introduced_name),1),e("p",S,r(o.value.introduced_phone),1),e("p",T,"موقعیت شغلی: "+r(o.value.position),1)])]),e("div",U,[e("span",{class:C([h(o.value.status),"px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full"])},r(_(o.value.status)),3)])])])]),e("div",V,[e("div",F,[e("div",P,[e("div",q,[e("div",A,[m.value?(l(),n("div",G,t[2]||(t[2]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"},null,-1),e("p",{class:"text-gray-500"},"در حال بارگذاری رزومه...",-1)]))):p.value?(l(),n("iframe",{key:1,src:`https://docs.google.com/viewer?url=${encodeURIComponent(p.value)}&embedded=true`,class:"w-full h-full",frameborder:"0"},null,8,H)):(l(),n("button",{key:2,onClick:y,class:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500"},t[3]||(t[3]=[e("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),f(" مشاهده رزومه ")])))])])])]),e("div",J,[e("button",{onClick:w,class:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},t[4]||(t[4]=[e("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),f(" دانلود رزومه ")])),e("div",K,[e("div",L,[t[5]||(t[5]=e("h3",{class:"text-sm font-medium text-gray-500 mb-4"},"معرفی شده توسط",-1)),e("div",O,[e("img",{src:o.value.user.avatar,alt:o.value.user.first_name+" "+o.value.user.last_name,class:"w-12 h-12 rounded-full object-cover"},null,8,Q),e("div",null,[e("p",W,r(o.value.user.first_name)+" "+r(o.value.user.last_name),1),e("p",X,r(o.value.user.email),1)])])])]),e("div",Y,[e("div",Z,[t[8]||(t[8]=e("h3",{class:"text-sm font-medium text-gray-500 mb-4"},"تاریخچه",-1)),e("div",ee,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-xs text-gray-500"},"تاریخ ثبت",-1)),e("p",te,r(v(o.value.created_at)),1)]),e("div",null,[t[7]||(t[7]=e("p",{class:"text-xs text-gray-500"},"آخرین بروزرسانی",-1)),e("p",se,r(v(o.value.updated_at)),1)])])])])])])]))]))}};export{ne as default};

import{_ as k}from"./BGVh3Zb7.js";import{g as j,D as C,r as d,k as $,c as l,o as a,a as e,t as n,A as R,d as f,b as B,w as D}from"./CSPX8tqz.js";const U={class:"container mx-auto p-0"},E={key:0,class:"flex justify-center items-center py-8"},M={key:1,class:"text-center text-red-500"},N={key:2,class:"space-y-6"},V={class:"bg-white shadow-md rounded-lg overflow-hidden"},z={class:"p-6"},I={class:"flex items-center justify-between"},S={class:"flex items-center space-x-4 space-x"},A={key:0,class:"w-16 h-16"},P=["src","alt"],T={key:1,class:"w-16 h-16"},F=["src","alt"],q={class:"text-lg font-semibold text-gray-900"},G={class:"text-sm text-gray-500"},H={class:"text-sm text-gray-700 mt-1"},J={class:"flex items-center space-x-4"},K={class:"grid grid-cols-4 gap-6"},L={class:"col-span-3"},O={class:"bg-white shadow-md rounded-lg overflow-hidden h-full"},Q={class:"p-6"},W={class:"h-[calc(100vh-400px)] flex items-center justify-center bg-gray-50 rounded-lg"},X={key:0,class:"flex flex-col items-center"},Y=["src"],Z={class:"space-y-6"},ee={class:"flex items-center space-x-4 space-x"},te={key:0,class:"w-12 h-12"},se=["src","alt"],oe={key:1,class:"w-12 h-12"},le=["src","alt"],ae={class:"text-sm font-medium text-gray-900"},ne={class:"text-xs text-gray-500"},re={class:"bg-white shadow-md rounded-lg overflow-hidden"},de={class:"p-6"},ce={class:"space-y-4"},ie={class:"text-sm text-gray-900"},ue={class:"text-sm text-gray-900"},fe={__name:"[id]",setup(me){const{$api:i,$formatDate:_}=j(),g=C(),t=d(null),u=d(!0),c=d(null),m=d(null),v=d(!1),h=async()=>{try{u.value=!0,c.value=null;const o=await i.get(`/api/v1/admin/resumes/${g.params.id}`);t.value=o.data}catch(o){c.value=o.message||"خطا در دریافت اطلاعات رزومه"}finally{u.value=!1}},x=o=>{switch(o){case"pending":return"bg-yellow-100 text-yellow-800";case"reviewed":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=o=>{switch(o){case"pending":return"در انتظار بررسی";case"reviewed":return"بررسی شده";case"accepted":return"تایید شده";case"rejected":return"رد شده";default:return o}},p=o=>{const s=new Date(o);return _(s)},w=async()=>{try{v.value=!0;const o=await i.get(`/api/v1/upload/presigned/${t.value.file}`);m.value=o.data.url}catch(o){console.error("Error loading PDF:",o),alert("خطا در مشاهده فایل")}finally{v.value=!1}},b=async()=>{try{const s=(await i.get(`/api/v1/upload/presigned/${t.value.file}`)).data.url,r=document.createElement("a");r.href=s,r.download=`resume-${t.value.introduced_name}.pdf`,document.body.appendChild(r),r.click(),document.body.removeChild(r)}catch(o){console.error("Error downloading file:",o),alert("خطا در دانلود فایل")}};return $(()=>h()),(o,s)=>{const r=k;return a(),l("div",U,[s[7]||(s[7]=e("div",{class:"mb-6"},[e("h1",{class:"text-xl font-bold text-purple-700"},"جزئیات رزومه")],-1)),u.value?(a(),l("div",E,s[0]||(s[0]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"},null,-1)]))):c.value?(a(),l("div",M,n(c.value),1)):(a(),l("div",N,[e("div",V,[e("div",z,[e("div",I,[e("div",S,[t.value.introduced_avatar?(a(),l("div",A,[e("img",{src:t.value.introduced_avatar,alt:t.value.introduced_name,class:"w-full h-full rounded-full object-cover"},null,8,P)])):(a(),l("div",T,[e("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(t.value.introduced_name)}&background=amber-500&color=fff`,alt:t.value.introduced_name,class:"w-full h-full rounded-full object-cover"},null,8,F)])),e("div",null,[e("h2",q,n(t.value.introduced_name),1),e("p",G,n(t.value.introduced_phone),1),e("p",H,"موقعیت شغلی: "+n(t.value.position),1)])]),e("div",J,[e("span",{class:R([x(t.value.status),"px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full"])},n(y(t.value.status)),3)])])])]),e("div",K,[e("div",L,[e("div",O,[e("div",Q,[e("div",W,[v.value?(a(),l("div",X,s[1]||(s[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"},null,-1),e("p",{class:"text-gray-500"},"در حال بارگذاری رزومه...",-1)]))):m.value?(a(),l("iframe",{key:1,src:`https://docs.google.com/viewer?url=${encodeURIComponent(m.value)}&embedded=true`,class:"w-full h-full",frameborder:"0"},null,8,Y)):(a(),l("button",{key:2,onClick:w,class:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500"},s[2]||(s[2]=[e("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),f(" مشاهده رزومه ")])))])])])]),e("div",Z,[e("button",{onClick:b,class:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},s[3]||(s[3]=[e("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),f(" دانلود رزومه ")])),B(r,{title:"معرفی شده توسط"},{default:D(()=>[e("div",ee,[t.value.user.avatar?(a(),l("div",te,[e("img",{src:t.value.user.avatar,alt:t.value.user.first_name+" "+t.value.user.last_name,class:"w-full h-full rounded-full object-cover"},null,8,se)])):(a(),l("div",oe,[e("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(t.value.user.first_name+" "+t.value.user.last_name)}&background=amber-500&color=fff`,alt:t.value.user.first_name+" "+t.value.user.last_name,class:"w-full h-full rounded-full object-cover"},null,8,le)])),e("div",null,[e("p",ae,n(t.value.user.first_name)+" "+n(t.value.user.last_name),1),e("p",ne,n(t.value.user.email),1)])])]),_:1}),e("div",re,[e("div",de,[s[6]||(s[6]=e("h3",{class:"text-sm font-medium text-gray-500 mb-4"},"تاریخچه",-1)),e("div",ce,[e("div",null,[s[4]||(s[4]=e("p",{class:"text-xs text-gray-500"},"تاریخ ثبت",-1)),e("p",ie,n(p(t.value.created_at)),1)]),e("div",null,[s[5]||(s[5]=e("p",{class:"text-xs text-gray-500"},"آخرین بروزرسانی",-1)),e("p",ue,n(p(t.value.updated_at)),1)])])])])])])]))])}}};export{fe as default};

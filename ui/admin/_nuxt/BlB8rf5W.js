import{_ as L}from"./D01jHPX4.js";import{_ as U}from"./CVi9GnK4.js";import{g as H,r as g,j as D,k as N,c as a,o,a as t,b as x,l as $,t as l,F as B,m as C,w as k,d as V,n as m,p as S}from"./CSPX8tqz.js";const F={class:"bg-white rounded-lg shadow p-6"},P={class:"flex items-center justify-between mb-4"},T={key:0,class:"flex justify-center items-center h-32"},E={key:1,class:"text-red-600 text-sm"},I={key:2},O={key:0,class:"text-gray-500 text-sm text-center py-4"},G={key:1},J={class:"space-y-4"},K={class:"w-10 h-10 rounded-full overflow-hidden"},Q=["src","alt"],R={key:1,class:"w-full h-full bg-gray-200 flex items-center justify-center"},W={class:"text-gray-500 text-sm"},X={class:"flex-1 min-w-0"},Y={key:0,class:"text-purple-600 inline-flex",title:"تولد امروز"},Z={class:"text-xs text-gray-500"},tt={class:"text-sm text-gray-500"},et={class:"text-sm text-gray-500"},st={class:"space-y-4 max-h-[60vh] overflow-y-auto"},at={class:"w-10 h-10 rounded-full overflow-hidden"},ot=["src","alt"],lt={key:1,class:"w-full h-full bg-gray-200 flex items-center justify-center"},nt={class:"text-gray-500 text-sm"},rt={class:"flex-1 min-w-0"},it={key:0,class:"text-purple-600 inline-flex",title:"تولد امروز"},dt={class:"text-xs text-gray-500"},ct={class:"text-sm text-gray-500"},ut={class:"text-sm text-gray-500"},vt={__name:"BirthdayUsers",setup(z){const{$api:w,$formatDateOnly:u,$toPersianDigits:h}=H(),v=g([]),p=g(!0),_=g(null),d=g(!1),r=n=>{const s=new Date,i=new Date(n);return s.getDate()===i.getDate()&&s.getMonth()===i.getMonth()},M=async()=>{try{p.value=!0,_.value=null;const n=await w.get("/api/v1/admin/users/jalali-month-birthdate");v.value=n.data.users||[]}catch(n){_.value=n.message||"خطا در دریافت اطلاعات"}finally{p.value=!1}},f=n=>{const s=n.split(" ");return s.length>=2?`${s[0][0]}${s[1][0]}`:n[0]},y=D(()=>[...v.value].sort((n,s)=>{const i=new Date(n.birthdate),e=new Date(s.birthdate),c=i.getMonth()+1,j=e.getMonth()+1,q=i.getDate(),A=e.getDate();return c!==j?c-j:q-A})),b=D(()=>y.value.slice(0,5));return N(()=>{M()}),(n,s)=>{const i=L;return o(),a("div",F,[t("div",P,[s[2]||(s[2]=t("h2",{class:"text-lg font-semibold text-gray-900"},"تولدهای این ماه",-1)),v.value.length>5?(o(),a("button",{key:0,onClick:s[0]||(s[0]=e=>d.value=!0),class:"text-sm text-purple-600 hover:text-purple-700 font-medium"}," نمایش همه ")):$("",!0)]),p.value?(o(),a("div",T,s[3]||(s[3]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-700"},null,-1)]))):_.value?(o(),a("div",E,l(_.value),1)):(o(),a("div",I,[v.value.length===0?(o(),a("div",O," هیچ کاربری در این ماه تولد ندارد. ")):(o(),a("div",G,[t("div",J,[(o(!0),a(B,null,C(b.value,e=>{var c;return o(),a("div",{key:e.id,class:"flex items-center gap-4 p-3 hover:bg-gray-50 rounded-lg transition-colors"},[t("div",K,[e.avatar?(o(),a("img",{key:0,src:e.avatar,alt:e.first_name+" "+e.last_name,class:"w-full h-full object-cover"},null,8,Q)):(o(),a("div",R,[t("span",W,l(f(e.first_name+" "+e.last_name)),1)]))]),t("div",X,[x(i,{to:`/users/${e.id}`,class:"text-sm font-medium text-gray-900 truncate flex items-center gap-2 hover:text-purple-600 transition-colors"},{default:k(()=>[V(l(e.first_name)+" "+l(e.last_name)+" ",1),r(e.birthdate)?(o(),a("span",Y,s[4]||(s[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)]))):$("",!0)]),_:2},1032,["to"]),t("p",Z,l((c=e.department)==null?void 0:c.title),1)]),t("div",tt,l(m(u)(e.birthdate)),1),t("div",et,l(m(h)(e.age))+" سال ",1)])}),128))])]))])),x(U,{"is-open":d.value,title:"تولدهای این ماه",size:"lg",onClose:s[1]||(s[1]=e=>d.value=!1)},{default:k(()=>[t("div",st,[(o(!0),a(B,null,C(y.value,e=>{var c;return o(),a("div",{key:e.id,class:"flex items-center gap-4 p-3 hover:bg-gray-50 rounded-lg transition-colors"},[t("div",at,[e.avatar?(o(),a("img",{key:0,src:e.avatar,alt:e.first_name+" "+e.last_name,class:"w-full h-full object-cover"},null,8,ot)):(o(),a("div",lt,[t("span",nt,l(f(e.first_name+" "+e.last_name)),1)]))]),t("div",rt,[x(i,{to:`/users/${e.id}`,class:"text-sm font-medium text-gray-900 truncate flex items-center gap-2 hover:text-purple-600 transition-colors"},{default:k(()=>[V(l(e.first_name)+" "+l(e.last_name)+" ",1),r(e.birthdate)?(o(),a("span",it,s[5]||(s[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)]))):$("",!0)]),_:2},1032,["to"]),t("p",dt,l((c=e.department)==null?void 0:c.title),1)]),t("div",ct,l(m(u)(e.birthdate)),1),t("div",ut,l(m(h)(e.age))+" سال ",1)])}),128))])]),_:1},8,["is-open"])])}}},pt={class:"bg-white rounded-lg shadow p-6"},mt={class:"flex items-center justify-between mb-4"},ht={key:0,class:"flex justify-center items-center h-32"},_t={key:1,class:"text-red-600 text-sm"},gt={key:2},xt={key:0,class:"text-gray-500 text-sm text-center py-4"},ft={key:1},yt={class:"space-y-4"},wt={class:"w-10 h-10 rounded-full overflow-hidden"},bt=["src","alt"],$t={key:1,class:"w-full h-full bg-gray-200 flex items-center justify-center"},kt={class:"text-gray-500 text-sm"},Mt={class:"flex-1 min-w-0"},jt={key:0,class:"text-purple-600 inline-flex",title:"شروع همکاری امروز"},Dt={class:"text-xs text-gray-500"},Bt={class:"text-sm text-gray-500"},Ct={class:"text-sm text-gray-500"},Vt={class:"space-y-4 max-h-[60vh] overflow-y-auto"},zt={class:"w-10 h-10 rounded-full overflow-hidden"},qt=["src","alt"],At={key:1,class:"w-full h-full bg-gray-200 flex items-center justify-center"},Ht={class:"text-gray-500 text-sm"},Nt={class:"flex-1 min-w-0"},Lt={key:0,class:"text-purple-600 inline-flex",title:"شروع همکاری امروز"},Ut={class:"text-xs text-gray-500"},St={class:"text-sm text-gray-500"},Ft={class:"text-sm text-gray-500"},Pt={__name:"PastMonthHires",setup(z){const{$api:w,$formatDateOnly:u,$toPersianDigits:h}=H(),v=g([]),p=g(!0),_=g(null),d=g(!1),r=n=>{const s=new Date,i=new Date(n);return s.getDate()===i.getDate()&&s.getMonth()===i.getMonth()},M=async()=>{try{p.value=!0,_.value=null;const n=await w.get("/api/v1/admin/users/jalali-month-cooperation-start-date");v.value=n.data.users||[]}catch(n){_.value=n.message||"خطا در دریافت اطلاعات"}finally{p.value=!1}},f=n=>{const s=n.split(" ");return s.length>=2?`${s[0][0]}${s[1][0]}`:n[0]},y=D(()=>[...v.value].sort((n,s)=>{const i=new Date(n.cooperation_start_date),e=new Date(s.cooperation_start_date),c=i.getMonth()+1,j=e.getMonth()+1,q=i.getDate(),A=e.getDate();return c!==j?c-j:q-A})),b=D(()=>y.value.slice(0,5));return N(()=>{M()}),(n,s)=>{const i=L;return o(),a("div",pt,[t("div",mt,[s[2]||(s[2]=t("h2",{class:"text-lg font-semibold text-gray-900"},"همکاران شروع به کار کرده در ماه گذشته",-1)),v.value.length>5?(o(),a("button",{key:0,onClick:s[0]||(s[0]=e=>d.value=!0),class:"text-sm text-purple-600 hover:text-purple-700 font-medium"}," نمایش همه ")):$("",!0)]),p.value?(o(),a("div",ht,s[3]||(s[3]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-700"},null,-1)]))):_.value?(o(),a("div",_t,l(_.value),1)):(o(),a("div",gt,[v.value.length===0?(o(),a("div",xt," هیچ همکاری در ماه گذشته شروع به کار نکرده است. ")):(o(),a("div",ft,[t("div",yt,[(o(!0),a(B,null,C(b.value,e=>{var c;return o(),a("div",{key:e.id,class:"flex items-center gap-4 p-3 hover:bg-gray-50 rounded-lg transition-colors"},[t("div",wt,[e.avatar?(o(),a("img",{key:0,src:e.avatar,alt:e.first_name+" "+e.last_name,class:"w-full h-full object-cover"},null,8,bt)):(o(),a("div",$t,[t("span",kt,l(f(e.first_name+" "+e.last_name)),1)]))]),t("div",Mt,[x(i,{to:`/users/${e.id}`,class:"text-sm font-medium text-gray-900 truncate flex items-center gap-2 hover:text-purple-600 transition-colors"},{default:k(()=>[V(l(e.first_name)+" "+l(e.last_name)+" ",1),r(e.cooperation_start_date)?(o(),a("span",jt,s[4]||(s[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)]))):$("",!0)]),_:2},1032,["to"]),t("p",Dt,l((c=e.department)==null?void 0:c.title),1)]),t("div",Bt,l(m(u)(e.cooperation_start_date)),1),t("div",Ct,l(m(h)(e.cooperation_duration))+" سال ",1)])}),128))])]))])),x(U,{"is-open":d.value,title:"همکاران شروع به کار کرده در ماه گذشته",size:"lg",onClose:s[1]||(s[1]=e=>d.value=!1)},{default:k(()=>[t("div",Vt,[(o(!0),a(B,null,C(y.value,e=>{var c;return o(),a("div",{key:e.id,class:"flex items-center gap-4 p-3 hover:bg-gray-50 rounded-lg transition-colors"},[t("div",zt,[e.avatar?(o(),a("img",{key:0,src:e.avatar,alt:e.first_name+" "+e.last_name,class:"w-full h-full object-cover"},null,8,qt)):(o(),a("div",At,[t("span",Ht,l(f(e.first_name+" "+e.last_name)),1)]))]),t("div",Nt,[x(i,{to:`/users/${e.id}`,class:"text-sm font-medium text-gray-900 truncate flex items-center gap-2 hover:text-purple-600 transition-colors"},{default:k(()=>[V(l(e.first_name)+" "+l(e.last_name)+" ",1),r(e.cooperation_start_date)?(o(),a("span",Lt,s[5]||(s[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)]))):$("",!0)]),_:2},1032,["to"]),t("p",Ut,l((c=e.department)==null?void 0:c.title),1)]),t("div",St,l(m(u)(e.cooperation_start_date)),1),t("div",Ft,l(m(h)(e.cooperation_duration))+" سال ",1)])}),128))])]),_:1},8,["is-open"])])}}},Tt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"},Et={class:"bg-white rounded-lg shadow p-6"},It={class:"flex items-center justify-between"},Ot={class:"text-2xl font-regular mt-1"},Gt={class:"bg-white rounded-lg shadow p-6"},Jt={class:"flex items-center justify-between"},Kt={class:"text-2xl font-regular mt-1"},Qt={class:"bg-white rounded-lg shadow p-6"},Rt={class:"flex items-center justify-between"},Wt={class:"text-2xl font-regular mt-1"},Xt={class:"bg-white rounded-lg shadow p-6"},Yt={class:"flex items-center justify-between"},Zt={class:"text-2xl font-regular mt-1"},te={__name:"StatsCards",setup(z){const{$api:w,$toPersianDigits:u}=H(),h=g({users:0,requests:0,resumes:0,departments:0}),v=g({users:0,requests:0,resumes:0,departments:0}),p=(d,r,M,f)=>{const y=performance.now(),b=n=>{const s=n-y,i=Math.min(s/M,1);v.value[f]=Math.floor(d+(r-d)*i),i<1&&requestAnimationFrame(b)};requestAnimationFrame(b)},_=async()=>{try{const d=await w.get("/api/v1/admin/info/dashboard");d.success&&(h.value={users:d.data.users||0,requests:d.data.requests||0,resumes:d.data.resumes||0,departments:d.data.departments||0},p(0,h.value.users,1e3,"users"),p(0,h.value.requests,1e3,"requests"),p(0,h.value.resumes,1e3,"resumes"),p(0,h.value.departments,1e3,"departments"))}catch(d){console.error("Error fetching stats:",d)}};return N(()=>{_()}),(d,r)=>(o(),a("div",Tt,[t("div",Et,[t("div",It,[t("div",null,[r[0]||(r[0]=t("p",{class:"text-sm text-gray-500"},"تعداد کاربران",-1)),t("p",Ot,l(m(u)(v.value.users)),1)]),r[1]||(r[1]=t("div",{class:"p-3 bg-purple-50 rounded-full"},[t("svg",{class:"h-6 w-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1))])]),t("div",Gt,[t("div",Jt,[t("div",null,[r[2]||(r[2]=t("p",{class:"text-sm text-gray-500"},"تعداد درخواست‌ها",-1)),t("p",Kt,l(m(u)(v.value.requests)),1)]),r[3]||(r[3]=t("div",{class:"p-3 bg-blue-50 rounded-full"},[t("svg",{class:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1))])]),t("div",Qt,[t("div",Rt,[t("div",null,[r[4]||(r[4]=t("p",{class:"text-sm text-gray-500"},"تعداد رزومه‌ها",-1)),t("p",Wt,l(m(u)(v.value.resumes)),1)]),r[5]||(r[5]=t("div",{class:"p-3 bg-green-50 rounded-full"},[t("svg",{class:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))])]),t("div",Xt,[t("div",Yt,[t("div",null,[r[6]||(r[6]=t("p",{class:"text-sm text-gray-500"},"تعداد دپارتمان‌ها",-1)),t("p",Zt,l(m(u)(v.value.departments)),1)]),r[7]||(r[7]=t("div",{class:"p-3 bg-yellow-50 rounded-full"},[t("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1))])])]))}},ee={class:"p-0"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},ne={__name:"index",setup(z){return(w,u)=>(o(),a("div",ee,[u[0]||(u[0]=t("h1",{class:"text-xl font-bold text-purple-700 mb-6"},"داشبورد",-1)),x(te),t("div",se,[x(vt),x(Pt)]),u[1]||(u[1]=S('<div class="bg-white rounded-lg shadow p-6"><h2 class="text-lg font-regular mb-4">فعالیت‌های اخیر</h2><div class="space-y-4"><div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"><div class="flex items-center space-x-3"><div class="p-2 bg-purple-50 rounded-full"><svg class="h-5 w-5 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg></div><div><p class="text-sm font-regular">کاربر جدید ثبت شد</p><p class="text-xs text-gray-500">2 ساعت پیش</p></div></div></div><div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"><div class="flex items-center space-x-3"><div class="p-2 bg-blue-50 rounded-full"><svg class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><div><p class="text-sm font-regular">درخواست جدید ثبت شد</p><p class="text-xs text-gray-500">3 ساعت پیش</p></div></div></div></div></div>',1))]))}};export{ne as default};

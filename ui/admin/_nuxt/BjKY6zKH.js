import{s as y,c as d,o as u,a as e,d as f,t as v,F as k,C as _,z as C,j as M,r as b,A as P,n as I,y as $,v as j,m as z}from"./FE44vmqp.js";const N={class:"flex items-center justify-between mt-4"},U={class:"flex-1 flex justify-between sm:hidden"},B=["disabled"],T=["disabled"],q={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},F={class:"text-sm text-gray-700"},L={class:"font-medium"},V={class:"font-medium"},D={class:"font-medium"},S={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},A=["disabled"],E=["onClick"],O=["disabled"],ae=Object.assign({name:"PaginationComponent"},{__name:"Pagination",props:{currentPage:{type:Number,required:!0},totalItems:{type:Number,required:!0},perPage:{type:Number,required:!0}},emits:["update:currentPage"],setup(l,{emit:h}){const o=l,x=h,r=y(()=>Math.ceil(o.totalItems/o.perPage)),m=y(()=>{const c=[];let t=Math.max(1,o.currentPage-Math.floor(2.5));const s=Math.min(r.value,t+5-1);s-t+1<5&&(t=Math.max(1,s-5+1));for(let n=t;n<=s;n++)c.push(n);return c}),g=y(()=>(o.currentPage-1)*o.perPage+1),p=y(()=>Math.min(o.currentPage*o.perPage,o.totalItems)),i=c=>{c>=1&&c<=r.value&&x("update:currentPage",c)};return(c,a)=>(u(),d("div",N,[e("div",U,[e("button",{class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.currentPage===1,onClick:a[0]||(a[0]=t=>i(l.currentPage-1))}," قبلی ",8,B),e("button",{class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.currentPage===r.value,onClick:a[1]||(a[1]=t=>i(l.currentPage+1))}," بعدی ",8,T)]),e("div",q,[e("div",null,[e("p",F,[a[4]||(a[4]=f(" نمایش ")),e("span",L,v(g.value),1),a[5]||(a[5]=f(" تا ")),e("span",V,v(p.value),1),a[6]||(a[6]=f(" از ")),e("span",D,v(l.totalItems),1),a[7]||(a[7]=f(" نتیجه "))])]),e("div",null,[e("nav",S,[e("button",{class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.currentPage===1,onClick:a[2]||(a[2]=t=>i(l.currentPage-1))},a[8]||(a[8]=[e("span",{class:"sr-only"},"قبلی",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]),8,A),(u(!0),d(k,null,_(m.value,t=>(u(),d("button",{key:t,class:C([t===l.currentPage?"z-10 bg-purple-50 border-purple-500 text-purple-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"]),onClick:s=>i(t)},v(t),11,E))),128)),e("button",{class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.currentPage===r.value,onClick:a[3]||(a[3]=t=>i(l.currentPage+1))},a[9]||(a[9]=[e("span",{class:"sr-only"},"بعدی",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]),8,O)])])])]))}}),H={class:"relative"},R=["placeholder"],G={key:0,class:"absolute z-10 left-0 right-0 bg-white border border-gray-200 rounded-lg mt-1 shadow-lg max-h-60 overflow-auto"},J={key:0,class:"flex items-center gap-2 px-3 py-2 text-gray-500"},K=["onMousedown"],Q=["src"],W={key:1,class:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs text-gray-500"},X={class:"flex flex-col"},Y={class:"font-medium text-sm text-gray-800"},Z={class:"text-xs text-gray-500"},se={__name:"UserFilter",props:{placeholder:{type:String,default:"جستجوی کاربر..."},selectedUser:{type:Object,default:null},defaultUserId:{type:[String,Number],default:""}},emits:["select"],setup(l,{emit:h}){const o=h,{$api:x}=M(),r=b(""),m=b([]),g=b(!1);let p;const i=b(!1);P(()=>l.selectedUser,t=>{t&&t.full_name?r.value=t.full_name:r.value=""},{immediate:!0}),P(()=>l.defaultUserId,async t=>{if(!t){r.value="",o("select",null);return}try{const s=await x.get(`/api/v1/admin/users/${t}`);s.data&&(r.value=s.data.first_name+" "+s.data.last_name,o("select",s.data))}catch{r.value="",o("select",null)}},{immediate:!0});const c=()=>{if(g.value=!0,p&&clearTimeout(p),!r.value){m.value=[],i.value=!1;return}i.value=!0,p=setTimeout(async()=>{try{const t=await x.get(`/api/v1/admin/users/search/${encodeURIComponent(r.value)}`);m.value=t.data.items||[],i.value=!1}catch{m.value=[],i.value=!1}},400)},a=t=>{o("select",t),r.value=t.full_name,g.value=!1};return document.addEventListener("click",()=>{g.value=!1}),(t,s)=>(u(),d("div",H,[I(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>r.value=n),class:"rounded-lg border border-gray-200 bg-white px-3 py-2 text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-200 focus:border-purple-300 transition w-full text-sm",type:"text",placeholder:l.placeholder,onFocus:s[1]||(s[1]=n=>g.value=!0),onInput:c},null,40,R),[[j,r.value]]),g.value&&(m.value.length>0||i.value)?(u(),d("ul",G,[i.value?(u(),d("li",J,s[2]||(s[2]=[e("svg",{class:"animate-spin h-4 w-4 mr-2 text-purple-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})],-1),f(" در حال جستجو... ")]))):$("",!0),(u(!0),d(k,null,_(m.value,n=>{var w;return u(),d("li",{key:n.id,class:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-purple-50",onMousedown:z(ee=>a(n),["prevent"])},[n.avatar?(u(),d("img",{key:0,src:n.avatar,class:"w-8 h-8 rounded-full object-cover border border-gray-200",alt:"avatar"},null,8,Q)):(u(),d("div",W,[e("span",null,v((w=n.full_name)==null?void 0:w.slice(0,1)),1)])),e("div",X,[e("span",Y,v(n.full_name),1),e("span",Z,v(n.department),1)])],40,K)}),128))])):$("",!0)]))}};export{se as _,ae as a};

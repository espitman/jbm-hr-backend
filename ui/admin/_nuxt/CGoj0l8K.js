import{_ as j}from"./Dc-gZsBO.js";import{j as B,r,q as M,c as o,o as i,a as e,t as a,F as _,B as f,x as b,b as z,w as L,d as m}from"./BJEvtXCT.js";const P={class:"p-1"},N={class:"bg-white rounded-lg shadow p-6"},$={key:0,class:"flex justify-center items-center py-8"},V={key:1,class:"text-red-600 text-center py-8"},F={key:2},T={class:"overflow-x-auto"},q={class:"min-w-full divide-y divide-gray-200"},A={class:"bg-white divide-y divide-gray-200"},D={class:"px-6 py-4 whitespace-nowrap"},E={class:"flex items-center"},I={class:"h-10 w-10 rounded-full overflow-hidden bg-gray-100"},S=["src","alt"],U={key:1,class:"h-full w-full flex items-center justify-center bg-gray-200"},G={class:"text-gray-500 text-lg"},H={class:"px-6 py-4 whitespace-nowrap"},J={class:"text-sm text-gray-900"},K={class:"px-6 py-4 whitespace-nowrap"},O={class:"text-sm text-gray-900"},Q={class:"px-6 py-4 whitespace-nowrap"},R={class:"text-sm text-gray-900"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Y={class:"mt-4 flex items-center justify-between"},Z={class:"flex-1 flex justify-between sm:hidden"},ee=["disabled"],te=["disabled"],se={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},le={class:"text-sm text-gray-700"},ae={class:"font-medium"},oe={class:"font-medium"},ie={class:"font-medium"},ne={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},re=["disabled"],de=["onClick"],ce=["disabled"],ve={__name:"list",setup(ue){const{$api:w}=B(),g=r([]),v=r(!0),c=r(null),l=r(1),u=r(10),p=r(0),d=r(0),x=async()=>{try{v.value=!0,c.value=null;const n=await w.get("/api/v1/admin/users",{page:l.value,limit:u.value});g.value=n.data.users,p.value=n.data.total,d.value=Math.ceil(p.value/u.value)}catch(n){c.value=n.message}finally{v.value=!1}},h=()=>{l.value<d.value&&(l.value++,x())},y=()=>{l.value>1&&(l.value--,x())},k=n=>{l.value=n,x()};return M(()=>{x()}),(n,t)=>{const C=j;return i(),o("div",P,[t[9]||(t[9]=e("h1",{class:"text-xl font-bold text-purple-700 mb-6"},"مدیریت کاربران",-1)),e("div",N,[v.value?(i(),o("div",$,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"},null,-1)]))):c.value?(i(),o("div",V,a(c.value),1)):(i(),o("div",F,[e("div",T,[e("table",q,[t[2]||(t[2]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," آواتار "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," نام و نام خانوادگی "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," ایمیل "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," شماره موبایل "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," نقش "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," عملیات ")])],-1)),e("tbody",A,[(i(!0),o(_,null,f(g.value,s=>(i(),o("tr",{key:s.id},[e("td",D,[e("div",E,[e("div",I,[s.avatar?(i(),o("img",{key:0,src:s.avatar,alt:`${s.first_name} ${s.last_name}`,class:"h-full w-full object-cover"},null,8,S)):(i(),o("div",U,[e("span",G,a(s.first_name[0])+a(s.last_name[0]),1)]))])])]),e("td",H,[e("div",J,a(s.first_name)+" "+a(s.last_name),1)]),e("td",K,[e("div",O,a(s.email),1)]),e("td",Q,[e("div",R,a(s.phone),1)]),e("td",W,[e("span",{class:b(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",s.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"])},a(s.role==="admin"?"مدیر":"کارمند"),3)]),e("td",X,[z(C,{to:`/users/${s.id}`},{default:L(()=>t[1]||(t[1]=[e("button",{class:"text-purple-600 hover:text-purple-900"},[e("div",{class:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-gray-100"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.232 5.232l3.536 3.536M9 13l6.586-6.586a2 2 0 112.828 2.828L11.828 15.828a2 2 0 01-2.828 0L9 13zm-6 6h12"})])])],-1)])),_:2},1032,["to"])])]))),128))])])])]))]),e("div",Y,[e("div",Z,[e("button",{disabled:l.value===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",onClick:y}," قبلی ",8,ee),e("button",{disabled:l.value===d.value,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",onClick:h}," بعدی ",8,te)]),e("div",se,[e("div",null,[e("p",le,[t[3]||(t[3]=m(" نمایش ")),e("span",ae,a((l.value-1)*u.value+1),1),t[4]||(t[4]=m(" تا ")),e("span",oe,a(Math.min(l.value*u.value,p.value)),1),t[5]||(t[5]=m(" از ")),e("span",ie,a(p.value),1),t[6]||(t[6]=m(" نتیجه "))])]),e("div",null,[e("nav",ne,[e("button",{disabled:l.value===1,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",onClick:y},t[7]||(t[7]=[e("span",{class:"sr-only"},"قبلی",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]),8,re),(i(!0),o(_,null,f(d.value,s=>(i(),o("button",{key:s,class:b(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s===l.value?"z-10 bg-purple-50 border-purple-500 text-purple-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"]),onClick:pe=>k(s)},a(s),11,de))),128)),e("button",{disabled:l.value===d.value,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",onClick:h},t[8]||(t[8]=[e("span",{class:"sr-only"},"بعدی",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]),8,ce)])])])])])}}};export{ve as default};

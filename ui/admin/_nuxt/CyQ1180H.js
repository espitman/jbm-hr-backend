import{g as _,q as V,r as p,k as Y,c as n,o as a,a as t,v as D,l as M,x as l,y as i,C as g,F as U,m as q,t as c,b as y,n as v}from"./CSPX8tqz.js";import{D as x}from"./BOy0U_Jd.js";const j={class:"p-0"},N={class:"bg-white rounded-lg shadow p-6"},S={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},h={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},C=["value"],F={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},T={class:"pt-2"},A=["disabled"],E={key:0,class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"},L={key:1},P={key:0,class:"text-red-600 text-sm text-center bg-red-50 py-2 px-4 rounded-lg"},H={__name:"register",setup($){const{$api:b}=_(),m=V(),r=p({email:"",phone:"",role:"employee",first_name:"",last_name:"",department_id:"",birthdate:"",cooperation_start_date:"",national_code:"",personnel_number:""}),f=p([]),s=p(!1),u=p(null),w=async()=>{try{s.value=!0;const d=await b.get("/api/v1/departments");f.value=d.data.departments||[]}catch{m.error("خطا در دریافت لیست دپارتمان‌ها")}finally{s.value=!1}},k=async()=>{try{s.value=!0,u.value=null,await b.post("/api/v1/admin/users/register",r.value),r.value={email:"",phone:"",role:"employee",first_name:"",last_name:"",department_id:"",birthdate:"",cooperation_start_date:"",national_code:"",personnel_number:""},m.success("کاربر با موفقیت ثبت شد")}catch(d){u.value=d.message||"خطا در ثبت کاربر",m.error(u.value)}finally{s.value=!1}};return Y(()=>{w()}),(d,e)=>(a(),n("div",j,[e[22]||(e[22]=t("h1",{class:"text-xl font-bold text-purple-700 mb-6"},"ثبت کاربر جدید",-1)),t("div",N,[t("form",{class:"space-y-6",onSubmit:D(k,["prevent"])},[t("div",S,[t("div",null,[e[10]||(e[10]=t("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mb-1"},"نام",-1)),l(t("input",{id:"first_name","onUpdate:modelValue":e[0]||(e[0]=o=>r.value.first_name=o),type:"text",class:"block w-full px-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",required:""},null,512),[[i,r.value.first_name]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"last_name",class:"block text-sm font-medium text-gray-700 mb-1"},"نام خانوادگی",-1)),l(t("input",{id:"last_name","onUpdate:modelValue":e[1]||(e[1]=o=>r.value.last_name=o),type:"text",class:"block w-full px-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",required:""},null,512),[[i,r.value.last_name]])])]),t("div",h,[t("div",null,[e[12]||(e[12]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"},"ایمیل",-1)),l(t("input",{id:"email","onUpdate:modelValue":e[2]||(e[2]=o=>r.value.email=o),type:"email",dir:"ltr",class:"block w-full px-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",required:""},null,512),[[i,r.value.email]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-1"},"شماره موبایل",-1)),l(t("input",{id:"phone","onUpdate:modelValue":e[3]||(e[3]=o=>r.value.phone=o),type:"tel",class:"block w-full px-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",required:""},null,512),[[i,r.value.phone]])])]),t("div",B,[t("div",null,[e[14]||(e[14]=t("label",{for:"national_code",class:"block text-sm font-medium text-gray-700 mb-1"},"کد ملی",-1)),l(t("input",{id:"national_code","onUpdate:modelValue":e[4]||(e[4]=o=>r.value.national_code=o),type:"text",class:"block w-full px-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",required:""},null,512),[[i,r.value.national_code]])]),t("div",null,[e[15]||(e[15]=t("label",{for:"personnel_number",class:"block text-sm font-medium text-gray-700 mb-1"},"شماره پرسنلی",-1)),l(t("input",{id:"personnel_number","onUpdate:modelValue":e[5]||(e[5]=o=>r.value.personnel_number=o),type:"text",class:"block w-full px-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",required:""},null,512),[[i,r.value.personnel_number]])])]),t("div",null,[e[17]||(e[17]=t("label",{for:"role",class:"block text-sm font-medium text-gray-700 mb-1"},"نقش",-1)),l(t("select",{id:"role","onUpdate:modelValue":e[6]||(e[6]=o=>r.value.role=o),class:"block w-full px-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",required:""},e[16]||(e[16]=[t("option",{value:"admin"},"مدیر",-1),t("option",{value:"employee"},"کارمند",-1)]),512),[[g,r.value.role]])]),t("div",null,[e[19]||(e[19]=t("label",{for:"department_id",class:"block text-sm font-medium text-gray-700 mb-1"},"دپارتمان",-1)),l(t("select",{id:"department_id","onUpdate:modelValue":e[7]||(e[7]=o=>r.value.department_id=o),class:"block w-full px-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",required:""},[e[18]||(e[18]=t("option",{value:""},"انتخاب دپارتمان",-1)),(a(!0),n(U,null,q(f.value,o=>(a(),n("option",{key:o.id,value:o.id},c(o.title),9,C))),128))],512),[[g,r.value.department_id]])]),t("div",F,[t("div",null,[e[20]||(e[20]=t("label",{for:"birthdate",class:"block text-sm font-medium text-gray-700 mb-1"},"تاریخ تولد",-1)),y(v(x),{id:"birthdate",modelValue:r.value.birthdate,"onUpdate:modelValue":e[8]||(e[8]=o=>r.value.birthdate=o),format:"YYYY-MM-DD","display-format":"jYYYY-jMM-jDD",editable:!1,"auto-submit":!1,"input-class":"block w-full px-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"},null,8,["modelValue"])]),t("div",null,[e[21]||(e[21]=t("label",{for:"cooperation_start_date",class:"block text-sm font-medium text-gray-700 mb-1"},"تاریخ شروع همکاری",-1)),y(v(x),{id:"cooperation_start_date",modelValue:r.value.cooperation_start_date,"onUpdate:modelValue":e[9]||(e[9]=o=>r.value.cooperation_start_date=o),format:"YYYY-MM-DD","display-format":"jYYYY-jMM-jDD",editable:!1,"auto-submit":!1,"input-class":"block w-full px-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"},null,8,["modelValue"])])]),t("div",T,[t("button",{type:"submit",class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors",disabled:s.value},[s.value?(a(),n("span",E)):(a(),n("span",L,"ثبت کاربر"))],8,A)]),u.value?(a(),n("div",P,c(u.value),1)):M("",!0)],32)])]))}};export{H as default};

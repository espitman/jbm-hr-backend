import{_ as I}from"./DXIf3zCj.js";import{r as x,c as r,o as a,a as e,b as q,F as j,C,t as l,w as _,s as A,j as L,D as V,q as z,y as h,E as w,x as $,z as T,n as F,v as E}from"./FE44vmqp.js";import{_ as O}from"./CxlkBo9E.js";const U={class:"space-y-6"},J={class:"grid grid-cols-2 gap-6"},G={class:"text-sm font-medium text-gray-700"},H={class:"relative aspect-[4/3] rounded-lg overflow-hidden border border-gray-200"},K=["src","alt","onClick"],P={class:"relative max-h-[80vh]"},Q={class:"text-sm font-medium text-gray-700 mb-4"},W=["src"],X={__name:"DevelopmentLearningDocs",props:{meta:{type:Array,default:()=>[]}},setup(g){const p=x(null),o=x(!1),u=n=>{p.value=n,o.value=!0};return(n,t)=>{const y=O;return a(),r("div",U,[e("div",J,[(a(!0),r(j,null,C(g.meta,(i,v)=>(a(),r("div",{key:v,class:"space-y-2"},[e("h3",G,l(n.$request.getDocumentTitle(i.key)),1),e("div",H,[e("img",{src:i.value,alt:n.$request.getDocumentTitle(i.key),class:"w-full h-full object-cover cursor-pointer",onClick:b=>u(i.value)},null,8,K)])]))),128))]),q(y,{"is-open":o.value,title:"پیش‌نمایش تصویر",size:"md",onClose:t[0]||(t[0]=i=>o.value=!1)},{default:_(()=>{var i;return[e("div",P,[e("h5",Q,l(n.$request.getDocumentTitle((i=g.meta.find(v=>v.value===p.value))==null?void 0:i.key)),1),e("img",{src:p.value,class:"max-w-full max-h-[80vh] object-contain"},null,8,W)])]}),_:1},8,["is-open"])])}}},Y={class:"overflow-x-auto"},Z={class:"min-w-full divide-y divide-gray-200"},ee={class:"bg-white divide-y divide-gray-200"},te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ae={__name:"TravelCreditDocs",props:{meta:{type:Array,default:()=>[]}},setup(g){const p=o=>o.key==="provider"?{jabama:"جاباما",alibaba:"علی‌بابا"}[o.value]||o.value:o.key==="credit_amount"?new Intl.NumberFormat("fa-IR").format(o.value)+" تومان":o.value;return(o,u)=>(a(),r("div",Y,[e("table",Z,[u[0]||(u[0]=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"کلید"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"مقدار")])],-1)),e("tbody",ee,[(a(!0),r(j,null,C(g.meta,(n,t)=>(a(),r("tr",{key:t},[e("td",te,l(o.$request.getDocumentTitle(n.key)),1),e("td",se,l(p(n)),1)]))),128))])])]))}},le={class:"space-y-6"},re={class:"text-sm font-medium text-gray-700 mb-4"},oe={class:"min-w-full divide-y divide-gray-200"},ne={class:"bg-white divide-y divide-gray-200"},ie={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ve={__name:"SupplementaryInsuranceDocs",props:{meta:{type:Array,default:()=>[]}},setup(g){const p=g,o=A(()=>p.meta.map(u=>({key:u.key,person:JSON.parse(u.value)})));return(u,n)=>(a(),r("div",le,[(a(!0),r(j,null,C(o.value,(t,y)=>(a(),r("div",{key:y,class:"overflow-x-auto"},[e("h3",re,l(u.$request.getDocumentTitle(t.key)),1),e("table",oe,[n[0]||(n[0]=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"نام و نام خانوادگی"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"کد ملی"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"شماره شناسنامه"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"جنسیت"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"نام پدر"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"تاریخ تولد")])],-1)),e("tbody",ne,[e("tr",null,[e("td",ie,l(t.person.firstName)+" "+l(t.person.lastName),1),e("td",de,l(t.person.nationalCode),1),e("td",ue,l(t.person.identityNumber),1),e("td",ce,l(t.person.gender==="male"?"مرد":"زن"),1),e("td",pe,l(t.person.fatherFirstName),1),e("td",xe,l(t.person.birthDate||"-"),1)])])])]))),128))]))}},me={class:"container mx-auto p-4"},ge={key:0,class:"flex justify-center items-center py-8"},ye={key:1,class:"text-center text-red-500"},_e={key:2,class:"space-y-6"},fe={class:"grid grid-cols-4 gap-6"},he={class:"space-y-6"},we={class:"flex flex-col items-center space-y-4"},be={key:0,class:"w-24 h-24"},ke=["src","alt"],$e={key:1,class:"w-24 h-24"},je=["src","alt"],Ce={class:"text-center"},qe={class:"text-lg font-semibold text-gray-900"},De={class:"text-sm text-gray-500"},Me={class:"flex flex-col space-y-3"},Te={class:"space-y-4"},Be={class:"flex items-start"},Ne={class:"mr-3"},Re={class:"text-sm text-gray-500"},Se={class:"flex-shrink-0"},Ie={class:"mr-3"},Ae={class:"text-sm font-medium text-gray-900"},Le={class:"text-sm text-gray-500"},Ve={key:0,class:"mt-1 text-sm text-gray-600"},ze={class:"col-span-3 space-y-6"},Fe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ee={class:"space-y-4"},Oe={class:"mt-1 text-sm text-gray-900"},Ue={class:"mt-1 text-sm text-gray-900"},Je={key:3,class:"overflow-x-auto"},Ge={class:"min-w-full divide-y divide-gray-200"},He={class:"bg-white divide-y divide-gray-200"},Ke={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Qe={class:"bg-gray-50 p-4 rounded-lg"},We={class:"text-sm text-gray-900 whitespace-pre-line leading-loose font-extralight text-justify"},Xe={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"},Ye={class:"bg-white p-8 rounded-lg"},Ze={class:"mt-4 space-x-2"},et=["disabled"],tt={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"},st={class:"bg-white p-8 rounded-lg"},at={class:"mt-4 space-x-2"},lt=["disabled"],it={__name:"[id]",setup(g){const{$request:p,$api:o,$formatDate:u}=L(),n=V(),t=x(null),y=x(!0),i=x(null),v=x(!1),b=x(!1),k=x(""),m=x(!1),D=async()=>{try{y.value=!0,i.value=null;const c=await o.get(`/api/v1/admin/requests/${n.params.id}`);t.value=c.data}catch(c){i.value=c.message||"خطا در دریافت اطلاعات درخواست"}finally{y.value=!1}},B=async()=>{if(k.value)try{m.value=!0,await o.post(`/api/v1/admin/requests/${n.params.id}/reject`,{reason:k.value}),v.value=!1,k.value="",await D()}catch(c){i.value=c.message||"خطا در رد درخواست"}finally{m.value=!1}},N=async()=>{try{m.value=!0,await o.post(`/api/v1/admin/requests/${n.params.id}/approve`),b.value=!1,await D()}catch(c){i.value=c.message||"خطا در تایید درخواست"}finally{m.value=!1}},R=c=>{switch(c){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=c=>{switch(c){case"pending":return"در انتظار بررسی";case"approved":return"تایید شده";case"rejected":return"رد شده";default:return c}};return z(()=>D()),(c,s)=>{const f=I;return a(),r("div",me,[s[17]||(s[17]=e("div",{class:"flex items-center justify-between mb-6"},[e("h1",{class:"text-xl font-bold text-purple-700"},"جزئیات درخواست")],-1)),y.value?(a(),r("div",ge,s[5]||(s[5]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"},null,-1)]))):i.value?(a(),r("div",ye,l(i.value),1)):(a(),r("div",_e,[e("div",fe,[e("div",he,[q(f,{title:"اطلاعات کاربر"},{default:_(()=>[e("div",we,[t.value.user.avatar?(a(),r("div",be,[e("img",{src:t.value.user.avatar,alt:t.value.user.first_name+" "+t.value.user.last_name,class:"w-full h-full rounded-full object-cover"},null,8,ke)])):(a(),r("div",$e,[e("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(t.value.user.first_name+" "+t.value.user.last_name)}&background=amber-500&color=fff`,alt:t.value.user.first_name+" "+t.value.user.last_name,class:"w-full h-full rounded-full object-cover"},null,8,je)])),e("div",Ce,[e("h2",qe,l(t.value.user.first_name)+" "+l(t.value.user.last_name),1),e("p",De,l(t.value.user.email),1)])])]),_:1}),t.value.status==="pending"?(a(),w(f,{key:0,title:"تغییر وضعیت"},{default:_(()=>[e("div",Me,[e("button",{onClick:s[0]||(s[0]=d=>b.value=!0),class:"flex items-center justify-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"},s[6]||(s[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),e("span",null,"تایید",-1)])),e("button",{onClick:s[1]||(s[1]=d=>v.value=!0),class:"flex items-center justify-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"},s[7]||(s[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),e("span",null,"رد",-1)]))])]),_:1})):h("",!0),q(f,{title:"تاریخچه وضعیت"},{default:_(()=>[e("div",Te,[e("div",Be,[s[9]||(s[9]=e("div",{class:"flex-shrink-0"},[e("span",{class:"h-8 w-8 rounded-full flex items-center justify-center bg-gray-100"},[e("svg",{class:"h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",Ne,[s[8]||(s[8]=e("p",{class:"text-sm font-medium text-gray-900"},"ایجاد درخواست",-1)),e("p",Re,l($(u)(t.value.created_at)),1)])]),(a(!0),r(j,null,C(t.value.status_history,(d,M)=>(a(),r("div",{key:M,class:"flex items-start"},[e("div",Se,[e("span",{class:T(["h-8 w-8 rounded-full flex items-center justify-center",R(d.status)])},s[10]||(s[10]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]),2)]),e("div",Ie,[e("p",Ae,l(S(d.status)),1),e("p",Le,l($(u)(d.created_at)),1),d.comment?(a(),r("p",Ve,l(d.comment),1)):h("",!0)])]))),128))])]),_:1})]),e("div",ze,[q(f,{title:"اطلاعات درخواست"},{default:_(()=>[e("div",Fe,[e("div",null,[e("div",Ee,[e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-500"},"نام و نام خانوادگی",-1)),e("p",Oe,l(t.value.full_name),1)]),e("div",null,[s[12]||(s[12]=e("label",{class:"block text-sm font-medium text-gray-500"},"نوع درخواست",-1)),e("p",Ue,l($(p).getRequestTypeText(t.value.kind)),1)]),e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm font-medium text-gray-500"},"وضعیت",-1)),e("span",{class:T([$(p).getStatusClass(t.value.status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},l($(p).getStatusText(t.value.status)),3)])])])])]),_:1}),t.value.meta&&t.value.meta.length>0?(a(),w(f,{key:0,title:"اطلاعات تکمیلی"},{default:_(()=>[t.value.kind==="development_learning"?(a(),w(X,{key:0,meta:t.value.meta},null,8,["meta"])):t.value.kind==="travel_credit"?(a(),w(ae,{key:1,meta:t.value.meta},null,8,["meta"])):t.value.kind==="supplementary_insurance"?(a(),w(ve,{key:2,meta:t.value.meta},null,8,["meta"])):(a(),r("div",Je,[e("table",Ge,[s[14]||(s[14]=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"کلید"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"مقدار")])],-1)),e("tbody",He,[(a(!0),r(j,null,C(t.value.meta,(d,M)=>(a(),r("tr",{key:M},[e("td",Ke,l(d.key),1),e("td",Pe,l(d.value),1)]))),128))])])]))]),_:1})):h("",!0),t.value.description&&t.value.description.trim()?(a(),w(f,{key:1,title:"توضیحات"},{default:_(()=>[e("div",Qe,[e("p",We,l(t.value.description),1)])]),_:1})):h("",!0)])])])),v.value?(a(),r("div",Xe,[e("div",Ye,[s[15]||(s[15]=e("h2",{class:"text-xl font-bold mb-4"},"دلیل رد درخواست",-1)),F(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=d=>k.value=d),class:"w-full h-32 p-2 border border-gray-300 rounded-lg",placeholder:"دلیل رد درخواست را وارد کنید"},null,512),[[E,k.value]]),e("div",Ze,[e("button",{onClick:s[3]||(s[3]=d=>v.value=!1),class:"px-4 py-2 bg-gray-200 text-gray-500 rounded-lg hover:bg-gray-300"}," انصراف "),e("button",{onClick:B,disabled:m.value,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"},l(m.value?"در حال ثبت...":"تایید"),9,et)])])])):h("",!0),b.value?(a(),r("div",tt,[e("div",st,[s[16]||(s[16]=e("h2",{class:"text-xl font-bold mb-4"},"تایید درخواست",-1)),e("div",at,[e("button",{onClick:s[4]||(s[4]=d=>b.value=!1),class:"px-4 py-2 bg-gray-200 text-gray-500 rounded-lg hover:bg-gray-300"}," انصراف "),e("button",{onClick:N,disabled:m.value,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"},l(m.value?"در حال ثبت...":"تایید"),9,lt)])])])):h("",!0)])}}};export{it as default};

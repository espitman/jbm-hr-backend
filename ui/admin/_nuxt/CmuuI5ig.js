import{_ as B}from"./D01jHPX4.js";import{g as $,D as q,G as D,r as n,B as g,k as I,c as i,o as l,a as e,t as d,F as z,m as M,A as N,b as R,w as E}from"./CSPX8tqz.js";const S={class:"container mx-auto p-0"},V={key:0,class:"flex justify-center items-center py-8"},A={key:1,class:"text-center text-red-500"},F={key:2},L={class:"bg-white shadow-md rounded-lg overflow-hidden"},P={class:"min-w-full divide-y divide-gray-200"},G={class:"bg-white divide-y divide-gray-200"},T={class:"px-6 py-4 whitespace-nowrap"},U={class:"text-sm text-gray-900"},H={class:"px-6 py-4 whitespace-nowrap"},J={class:"text-sm text-gray-900"},K={class:"px-6 py-4 whitespace-nowrap"},O={class:"text-sm text-gray-900"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"text-sm text-gray-900"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Q=["onClick"],re={__name:"list",setup(ee){const{$api:h,$formatDate:_}=$(),p=q(),m=D(),v=n([]),x=n(!0),c=n(null),u=n(1),f=n(10),w=n(0),o=n({status:"",userId:""}),y=async()=>{try{x.value=!0,c.value=null;const t={page:u.value,page_size:f.value};o.value.status&&(t.status=o.value.status),o.value.userId&&(t.user_id=o.value.userId);const s=await h.get("/api/v1/admin/resumes",t);v.value=s.data.items,w.value=s.data.total}catch(t){c.value=t.message||"خطا در دریافت اطلاعات رزومه‌ها"}finally{x.value=!1}};g(()=>p.query,async t=>{o.value.status=t.status||"",o.value.userId=t.user_id||"",t.page?u.value=parseInt(t.page):u.value=1,await y()},{immediate:!0}),g(()=>[o.value.status,o.value.userId],([t,s])=>{const r={...p.query,page:1};t?r.status=t:delete r.status,s?r.user_id=s:delete r.user_id,m.push({query:r})}),g(()=>u.value,t=>{const s={...p.query,page:t};m.push({query:s})});const k=t=>{switch(t){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},b=t=>{switch(t){case"pending":return"در انتظار بررسی";case"approved":return"تایید شده";case"rejected":return"رد شده";default:return t}},C=t=>{const s=new Date(t);return _(s)},j=async t=>{try{const r=(await h.get(`/api/v1/upload/presigned/${t.file}`)).data.url,a=document.createElement("a");a.href=r,a.download=`resume-${t.introduced_name}.pdf`,document.body.appendChild(a),a.click(),document.body.removeChild(a)}catch(s){console.error("Error downloading file:",s),alert("خطا در دانلود فایل")}};return I(()=>{y()}),(t,s)=>{const r=B;return l(),i("div",S,[s[4]||(s[4]=e("div",{class:"flex items-center justify-between mb-6"},[e("h1",{class:"text-xl font-bold text-purple-700"},"رزومه‌ها")],-1)),x.value?(l(),i("div",V,s[0]||(s[0]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"},null,-1)]))):c.value?(l(),i("div",A,d(c.value),1)):(l(),i("div",F,[e("div",L,[e("table",P,[s[3]||(s[3]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," معرفی شده "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," شماره تماس معرفی شده "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," موقعیت شغلی "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," وضعیت "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," تاریخ ثبت "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," عملیات ")])],-1)),e("tbody",G,[(l(!0),i(z,null,M(v.value,a=>(l(),i("tr",{key:a.id},[e("td",T,[e("div",U,d(a.introduced_name),1)]),e("td",H,[e("div",J,d(a.introduced_phone),1)]),e("td",K,[e("div",O,d(a.position),1)]),e("td",W,[e("span",{class:N([k(a.status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},d(b(a.status)),3)]),e("td",X,[e("div",Y,d(C(a.created_at)),1)]),e("td",Z,[R(r,{to:`/resumes/${a.id}`,class:"text-purple-600 hover:text-purple-900 ml-4 cursor-pointer"},{default:E(()=>s[1]||(s[1]=[e("div",{class:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-gray-100"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})])],-1)])),_:2},1032,["to"]),e("button",{class:"text-green-600 hover:text-green-900 cursor-pointer",onClick:te=>j(a)},s[2]||(s[2]=[e("div",{class:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-gray-100"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})])],-1)]),8,Q)])]))),128))])])])]))])}}};export{re as default};
